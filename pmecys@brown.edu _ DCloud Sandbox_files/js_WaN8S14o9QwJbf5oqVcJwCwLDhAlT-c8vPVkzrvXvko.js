/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
let ed11yOnce;let ed11yInitialized;let ed11yWaiting=false;const ed11yInitializer=function(){if(ed11yInitialized==='disabled'||ed11yInitialized==='pending')return;ed11yInitialized='pending';let options={};options.checkRoots=drupalSettings.editoria11y.content_root?drupalSettings.editoria11y.content_root:false;options.ignoreElements=!!drupalSettings.editoria11y.ignore_elements?`#toolbar-administration *, ${drupalSettings.editoria11y.ignore_elements}`:'#toolbar-administration *';options.panelNoCover=!!drupalSettings.editoria11y.panel_no_cover?drupalSettings.editoria11y.panel_no_cover:'#klaro-cookie-notice, #klaro_toggle_dialog, .same-page-preview-dialog.ui-dialog-position-side, #gin_sidebar, #admin-toolbar';if(drupalSettings.editoria11y.panel_pin==='left')options.panelPinTo='left';options.ignoreAllIfAbsent=!!drupalSettings.editoria11y.ignore_all_if_absent?drupalSettings.editoria11y.ignore_all_if_absent:false;options.buttonZIndex=100;options.autoDetectShadowComponents=!!drupalSettings.editoria11y.detect_shadow;options.shadowComponents=drupalSettings.editoria11y.shadow_components?drupalSettings.editoria11y.shadow_components:false;options.ignoreByKey={'p':'table:not(.field-multiple-table) p','h':'.filter-guidelines-item *, nav *, [id$="-local-tasks"] *, .block-local-tasks-block *, .tabledrag h4','img':'[aria-hidden], [aria-hidden] img, [role="presentation"], a[href][aria-label] img, button[aria-label] img, a[href][aria-labelledby] img, button[aria-labelledby] img','a':`[aria-hidden][tabindex], [id$="-local-tasks"] a, .block-local-tasks-block a, .filter-help > a, .contextual-region > nav a ${drupalSettings.path.currentPathIsAdmin?', a[target="_blank"]':''}`,'table':'[role="presentation"], .tabledrag'};let editors=(Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')));if(editors){options.inlineAlerts=false;const editRoutes=/(node|term|user)\/\d+\/edit/;if(!drupalSettings.path.currentPathIsAdmin&&!drupalSettings.path.currentPath.match(editRoutes))editors=false;}if(editors){options.watchForChanges=true;if(Object.hasOwn(Drupal.editors,'gutenberg'))options.buttonZIndex=1000;else options.ignoreAriaOnElements='[data-drupal-media-preview], [data-drupal-entity-preview]';}else options.watchForChanges=drupalSettings.editoria11y.watch_for_changes==='checkRoots'?'checkRoots':drupalSettings.editoria11y.watch_for_changes!=='false';let delay=drupalSettings.path.currentPathIsAdmin?250:0;if(document.URL.indexOf('mode=same_page_preview')>-1||(drupalSettings.path.currentPathIsAdmin&&drupalSettings.editoria11y.disable_live===true)){ed11yOnce=true;ed11yInitialized='disabled';return;}else{if(drupalSettings.path.currentPathIsAdmin&&!editors){ed11yInitialized=false;return;}}if(document.querySelector('.layout-builder-form')){ed11yOnce=true;ed11yInitialized='disabled';return;}else{if(editors){options.autoDetectShadowComponents=false;if(Object.hasOwn(Drupal.editors,'gutenberg')){options.ignoreAriaOnElements='h1,h2,h3,h4,h5,h6';delay=1000;window.setTimeout(function(){if(Ed11y.results.length===0)Ed11y.checkAll();},6000);}options.checkRoots='.gutenberg__editor .is-root-container, [contenteditable="true"]:not(.gutenberg__editor [contenteditable], [contenteditable="true"] [contenteditable])';options.ignoreElements+=', [hidden], [style*="display: none"], [style*="display:none"], [hidden] *, [style*="display: none"] *, [style*="display:none"] *, [data-drupal-message-type]';options.ignoreAllIfAbsent=options.ignoreAllIfAbsent?options.ignoreAllIfAbsent+', [contenteditable="true"], .gutenberg__editor .is-root-container':'[contenteditable="true"], .gutenberg__editor .is-root-container';options.editorHeadingLevel=[];if(drupalSettings.editoria11y.live_h2)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h2,previousHeading:1});if(drupalSettings.editoria11y.live_h3)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h3,previousHeading:2});if(drupalSettings.editoria11y.live_h4)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h4,previousHeading:3});if(drupalSettings.editoria11y.live_h_inherit)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h_inherit,previousHeading:'inherit'});options.editorHeadingLevel.push({selector:'*',previousHeading:0});}}ed11yOnce=true;let urlParams=new URLSearchParams(window.location.search);let lang=drupalSettings.editoria11y.lang?drupalSettings.editoria11y.lang:'en';if(lang!=='en'){lang='dynamic';ed11yLang.dynamic=ed11yLangDrupal;options.langSanitizes=true;}let ed11yAlertMode=drupalSettings.editoria11y.assertiveness?drupalSettings.editoria11y.assertiveness:'assertive';const now=new Date();if(drupalSettings.path.currentPathIsAdmin&&(Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')))&&(ed11yAlertMode==='smart'||ed11yAlertMode==='assertive'))ed11yAlertMode='active';else{if(urlParams.has('ed1ref')||(ed11yAlertMode==='smart'&&((now/1000)-drupalSettings.editoria11y.changed<60)))ed11yAlertMode='assertive';}options.lang=lang;options.alertMode=ed11yAlertMode;options.currentPage=drupalSettings.editoria11y.page_path;options.allowHide=!!drupalSettings.editoria11y.allow_hide;options.allowOK=!!drupalSettings.editoria11y.allow_ok;options.syncedDismissals=drupalSettings.editoria11y.dismissals;options.showDismissed=urlParams.has('ed1ref');options.preventCheckingIfPresent=!!drupalSettings.editoria11y.no_load?drupalSettings.editoria11y.no_load+', .layout-builder-form':'.layout-builder-form';options.linkStringsNewWindows=!!drupalSettings.editoria11y.link_strings_new_windows?new RegExp(drupalSettings.editoria11y.link_strings_new_windows,'gi'):!!drupalSettings.editoria11y.ignore_link_strings?new RegExp(drupalSettings.editoria11y.ignore_link_strings,'gi'):new RegExp('('+Drupal.t('download')+')|(\\s'+Drupal.t('tab')+')|('+Drupal.t('window')+')','gi');options.linkIgnoreStrings=!!drupalSettings.editoria11y.ignore_link_strings?new RegExp(drupalSettings.editoria11y.ignore_link_strings,'gi'):new RegExp('('+Drupal.t('link is external')+')|('+Drupal.t('link sends email')+')','gi');options.linkIgnoreSelector=!!drupalSettings.editoria11y.link_ignore_selector?drupalSettings.editoria11y.link_ignore_selector:false;options.hiddenHandlers=!!drupalSettings.editoria11y.hidden_handlers?drupalSettings.editoria11y.hidden_handlers:'';options.constrainButtons=!!drupalSettings.editoria11y.element_hides_overflow?drupalSettings.editoria11y.element_hides_overflow:'';options.theme=!!drupalSettings.editoria11y.theme?drupalSettings.editoria11y.theme:'sleekTheme';options.embeddedContent=!!drupalSettings.editoria11y.embedded_content_warning?drupalSettings.editoria11y.embedded_content_warning:false;options.documentLinks=!!drupalSettings.editoria11y.download_links?drupalSettings.editoria11y.download_links:`a[href$='.pdf'], a[href*='.pdf?']`;options.customTests=drupalSettings.editoria11y.custom_tests;options.cssUrls=!!drupalSettings.editoria11y.css_url?[drupalSettings.editoria11y.css_url+'/library/dist/editoria11y.min.css']:false;options.ignoreTests=drupalSettings.editoria11y.ignore_tests?drupalSettings.editoria11y.ignore_tests:false;const editSelector=(selector,action)=>{return `[id$="-local-tasks"] a[href*="/${selector}/"][href$="/${action}"],
            .block-local-tasks-block a[href*="/${selector}/"][href$="/${action}"]`;};const editLink=document.querySelector(editSelector('node','edit'));const layoutLink=document.querySelector(editSelector('node','layout'));const userLink=document.querySelector(editSelector('user','edit'));const termLink=document.querySelector(editSelector('taxonomy/term','edit'));if(editLink||layoutLink||userLink||termLink){const editIcon=document.createElement('span');editIcon.classList.add('ed11y-custom-edit-icon');editIcon.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"/></svg>';const reLink=function(link,text){const linkButton=document.createElement('a');linkButton.href=link.href;linkButton.textContent=text;linkButton.prepend(editIcon.cloneNode(true));return linkButton;};const editLinks=document.createElement('div');if(editLink)editLinks.appendChild(reLink(editLink,Drupal.t('Page editor')));if(layoutLink)editLinks.appendChild(reLink(layoutLink,Drupal.t('Layout editor')));if(userLink)editLinks.appendChild(reLink(userLink,Drupal.t('Edit user')));if(termLink)editLinks.appendChild(reLink(termLink,Drupal.t('Edit term')));options.editLinks=editLinks;if(!!drupalSettings.editoria11y.hide_edit_links)document.addEventListener('ed11yPop',(e)=>{if(e.detail.result.element.closest(drupalSettings.editoria11y.hide_edit_links))e.detail.tip.shadowRoot.querySelector('.ed11y-custom-edit-links')?.setAttribute('hidden','');});}if(!!drupalSettings.editoria11y.view_reports)options.reportsURL=drupalSettings.editoria11y.dashboard_url;if(typeof editoria11yOptionsOverride!=='undefined'&&typeof editoria11yOptions==='function')options=editoria11yOptions(options);ed11yWaiting=true;window.setTimeout(function(){ed11yInitialized=true;document.addEventListener('ed11yResultsPainted',function(){if(Ed11y.options.inlineAlerts)return;Ed11y.results?.forEach((result)=>{const inDialog=result?.element?.closest('dialog, [role="dialog"]');if(inDialog)result?.toggle?.style.setProperty('--ed11y-buttonZIndex','99999');});});const ed11y=new Ed11y(options);ed11yWaiting=false;let rootsCache;let dialogRoots='';document.addEventListener('dialog:aftercreate',function(){if(!rootsCache){rootsCache=Ed11y.options.checkRoots;const rootsParse=Ed11y.options.checkRoots.split(',');rootsParse.forEach((root,i)=>{rootsParse[i]=`#drupal-modal ${root}`;});dialogRoots=rootsParse.join(', ');}Ed11y.options.checkRoots=dialogRoots;Ed11y.forceFullCheck=true;Ed11y.incrementalCheck();});document.addEventListener('dialog:afterclose',function(){if(rootsCache){Ed11y.options.checkRoots=rootsCache;Ed11y.forceFullCheck=true;Ed11y.incrementalCheck();}});window.setTimeout(function(){if(!urlParams.has('ed1strings'))return;if(typeof (drupalTranslations)==='undefined'){console.warn('Editoria11y: No translations present to debug.');return;}const target=document.querySelector('main');const wrap=document.createElement('div');target.prepend(wrap);const missingTranslations=document.createElement('strong');missingTranslations.textContent=Drupal.t("Translation needed: ");missingTranslations.style.setProperty('border','1px solid');missingTranslations.style.setProperty('filter','invert(1)');for(const [key,value] of Object.entries(Ed11y.M)){if(!ed11yLangDrupal[key])console.warn(key);let checkTranslation=true;if(!(drupalTranslations&&drupalTranslations.strings&&drupalTranslations.problems))checkTranslation=false;let item=document.createElement('div');if(value.title&&typeof value.tip()){item.textContent=value.tip('example');if(checkTranslation&&!drupalTranslations.strings[""][value.tip('')])item.prepend(missingTranslations.cloneNode(true));let title=document.createElement('strong');title.style.setProperty('display','block');title.textContent=value.title;if(checkTranslation&&!drupalTranslations.strings[""][value.title])title.prepend(missingTranslations.cloneNode(true));item.prepend(title);}else{item.innerHTML=value;if(checkTranslation&&!(drupalTranslations.strings[""][value]||drupalTranslations.strings['problems'][value]))item.prepend(missingTranslations.cloneNode(true));}const itemKey=document.createElement('em');itemKey.textContent=key+': ';item.prepend(itemKey);wrap.append(item);const br=document.createElement('br');wrap.append(br);}},100);},delay);let csrfToken=false;function getCsrfToken(action,data){fetch(`${drupalSettings.editoria11y.session_url}`,{method:"GET"}).then((res)=>res.text()).then((token)=>{csrfToken=token;postData(action,data).catch((err)=>console.error(err));}).catch((err)=>console.error(err));;}let postData=async function(action,data){if(!csrfToken)getCsrfToken(action,data);else{let apiRoot=drupalSettings.editoria11y.api_url.replace('results/report','');let url=`${apiRoot}${action}`;fetch(url,{method:'POST',headers:{'Content-Type':'application/json','X-CSRF-Token':csrfToken},body:JSON.stringify(data)}).catch((error)=>console.error('Error:',error));}};if(urlParams.has('ed1ref')&&urlParams.get('ed1ref')!==drupalSettings.editoria11y.page_path){let data={page_path:urlParams.get('ed1ref')};window.setTimeout(function(){postData('purge/page',data);},0,data);}let results={};let oks={};let total=0;let extractResults=function(){results={};oks={};total=0;Ed11y.results.forEach((result)=>{if(result.dismissalStatus!=="ok"){let testName=result.test;testName=Ed11y.M[testName].title;if(results[testName]){results[testName]=parseInt(results[testName])+1;total++;}else{results[testName]=1;total++;}}if(result.dismissalStatus==="ok")if(!results[result.test])oks[result.test]=Ed11y.M[result.test].title;});};let sendResults=function(){window.setTimeout(function(){total=0;extractResults();let url=window.location.pathname+window.location.search;url=url.length>1000?url.substring(0,1000):url;let data={page_title:drupalSettings.editoria11y.page_title,page_path:drupalSettings.editoria11y.page_path,entity_id:drupalSettings.editoria11y.entity_id,page_count:total,language:drupalSettings.editoria11y.lang,entity_type:drupalSettings.editoria11y.entity_type,route_name:drupalSettings.editoria11y.route_name,results,oks,page_url:url};postData('results/report',data);},100);};let firstRun=true;if(drupalSettings.editoria11y.dismissals&&drupalSettings.editoria11y.sync!=='dismissals'&&drupalSettings.editoria11y.sync!=='disable')document.addEventListener('ed11yResults',function(){if(firstRun){sendResults();firstRun=false;}});let ed11yDismissalsCache={};let sendDismissal=function(detail){if(!!detail){let data={};if(detail.dismissAction==='reset'){ed11yDismissalsCache={};data={page_path:drupalSettings.editoria11y.page_path,language:drupalSettings.editoria11y.lang,route_name:drupalSettings.editoria11y.route_name,dismissal_status:'reset'};if(drupalSettings.editoria11y.sync!=='dismissals')window.setTimeout(function(){sendResults();},100);}else if(detail.dismissTest in ed11yDismissalsCache&&ed11yDismissalsCache[detail.dismissTest].includes(detail.dismissKey))return false;else{if(!(detail.dismissTest in ed11yDismissalsCache))ed11yDismissalsCache[detail.dismissTest]=[detail.dismissKey];else ed11yDismissalsCache[detail.dismissTest].push(detail.dismissKey);const editableTitleField=document.querySelector('#edit-title-wrapper input, #edit-name-wrapper input, #edit-name input');data={page_title:drupalSettings.path.currentPathIsAdmin&&editableTitleField&&editableTitleField.value?editableTitleField.value:drupalSettings.editoria11y.page_title,page_path:drupalSettings.editoria11y.page_path,entity_id:drupalSettings.editoria11y.entity_id,language:drupalSettings.editoria11y.lang,entity_type:drupalSettings.editoria11y.entity_type,route_name:drupalSettings.editoria11y.route_name,result_name:Ed11y.M[detail.dismissTest].title,result_key:detail.dismissTest,element_id:detail.dismissKey,dismissal_status:detail.dismissAction};if(detail.dismissAction==='ok'&&drupalSettings.editoria11y.sync!=='dismissals')window.setTimeout(function(){sendResults();},100);}postData('dismiss/'+detail.dismissAction,data);}};if(drupalSettings.editoria11y.dismissals&&drupalSettings.editoria11y.sync!=='disable')document.addEventListener('ed11yDismissalUpdate',function(e){sendDismissal(e.detail);},false);};Drupal.behaviors.editoria11y={attach:function(context,settings){if(ed11yInitialized===true&&ed11yOnce)window.setTimeout(function(){Ed11y.forceFullCheck=true;if(drupalSettings.editor||typeof (DrupalGutenberg)==='object')Ed11y.options.inlineAlerts=false;if(Ed11y.bodyStyle)Ed11y.incrementalCheck();else Ed11y.checkAll();},1000);else{if(ed11yOnce&&(!ed11yInitialized||ed11yInitialized!=='pending')&&!drupalSettings.editoria11y.disable_live&&Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')))window.setTimeout(function(){if(ed11yInitialized!==true)ed11yInitializer();},1000);}if(context===document&&!ed11yOnce&&CSS.supports('selector(:is(body))')){ed11yOnce=true;window.setTimeout(()=>{ed11yInitializer();},100);}}};;
((Drupal,drupalSettings,once)=>{Drupal.behaviors.ginAccent={attach:function(context){once("ginAccent","body",context).forEach((()=>{Drupal.ginAccent.checkDarkmode(),Drupal.ginAccent.setAccentColor(),Drupal.ginAccent.setFocusColor();}));}},Drupal.ginAccent={setAccentColor:function(){let preset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,color=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const accentColorPreset=null!=preset?preset:drupalSettings.gin.preset_accent_color;document.body.setAttribute("data-gin-accent",accentColorPreset),"custom"===accentColorPreset&&this.setCustomAccentColor(color);},setCustomAccentColor:function(){let color=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,element=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;const accentColor=null!=color?color:drupalSettings.gin.accent_color;if(accentColor){this.clearAccentColor(element);const strippedAccentColor=accentColor.replace("#",""),darkAccentColor=this.mixColor("ffffff",strippedAccentColor,65).replace("#",""),style=document.createElement("style");style.className="gin-custom-colors",style.innerHTML=`\n          [data-gin-accent="custom"] {\n            --gin-color-primary-rgb: ${this.hexToRgb(accentColor)};\n            --gin-color-primary-hover: ${this.shadeColor(accentColor,-10)};\n            --gin-color-primary-active: ${this.shadeColor(accentColor,-15)};\n            --gin-bg-app-rgb: ${this.hexToRgb(this.mixColor("ffffff",strippedAccentColor,97))};\n            --gin-bg-header: ${this.mixColor("ffffff",strippedAccentColor,85)};\n            --gin-color-sticky-rgb: ${this.hexToRgb(this.mixColor("ffffff",strippedAccentColor,92))};\n          }\n          .gin--dark-mode[data-gin-accent="custom"],\n          .gin--dark-mode [data-gin-accent="custom"] {\n            --gin-color-primary-rgb: ${this.hexToRgb(darkAccentColor)};\n            --gin-color-primary-hover: ${this.mixColor("ffffff",strippedAccentColor,55)};\n            --gin-color-primary-active: ${this.mixColor("ffffff",strippedAccentColor,50)};\n            --gin-bg-header: ${this.mixColor("2A2A2D",darkAccentColor,88)};\n          }\n        `,element.append(style);}},clearAccentColor:function(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(element.querySelectorAll(".gin-custom-colors").length>0){const removeElement=element.querySelector(".gin-custom-colors");removeElement.parentNode.removeChild(removeElement);}},setFocusColor:function(){let preset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,color=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const focusColorPreset=null!=preset?preset:drupalSettings.gin.preset_focus_color;document.body.setAttribute("data-gin-focus",focusColorPreset),"custom"===focusColorPreset&&this.setCustomFocusColor(color);},setCustomFocusColor:function(){let color=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,element=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;const accentColor=null!=color?color:drupalSettings.gin.focus_color;if(accentColor){this.clearFocusColor(element);const strippedAccentColor=accentColor.replace("#",""),darkAccentColor=this.mixColor("ffffff",strippedAccentColor,65),style=document.createElement("style");style.className="gin-custom-focus",style.innerHTML=`\n          [data-gin-focus="custom"] {\n            --gin-color-focus: ${accentColor};\n          }\n          .gin--dark-mode[data-gin-focus="custom"],\n          .gin--dark-mode [data-gin-focus="custom"] {\n            --gin-color-focus: ${darkAccentColor};\n          }`,element.append(style);}},clearFocusColor:function(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(element.querySelectorAll(".gin-custom-focus").length>0){const removeElement=element.querySelector(".gin-custom-focus");removeElement.parentNode.removeChild(removeElement);}},checkDarkmode:()=>{const darkmodeClass=drupalSettings.gin.darkmode_class;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",((e)=>{e.matches&&"auto"===window.ginDarkmode&&document.querySelector("html").classList.add(darkmodeClass);})),window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",((e)=>{e.matches&&"auto"===window.ginDarkmode&&document.querySelector("html").classList.remove(darkmodeClass);}));},hexToRgb:(hex)=>{hex=hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(m,r,g,b){return r+r+g+g+b+b;}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?`${parseInt(result[1],16)}, ${parseInt(result[2],16)}, ${parseInt(result[3],16)}`:null;},mixColor:(color_1,color_2,weight)=>{function h2d(h){return parseInt(h,16);}weight=void 0!==weight?weight:50;for(var color="#",i=0;i<=5;i+=2){for(var v1=h2d(color_1.substr(i,2)),v2=h2d(color_2.substr(i,2)),val=Math.floor(v2+weight/100*(v1-v2)).toString(16);val.length<2;)val="0"+val;color+=val;}return color;},shadeColor:(color,percent)=>{const num=parseInt(color.replace("#",""),16),amt=Math.round(2.55*percent),R=(num>>16)+amt,B=(num>>8&255)+amt,G=(255&num)+amt;return `#${(16777216+65536*(R<255?R<1?0:R:255)+256*(B<255?B<1?0:B:255)+(G<255?G<1?0:G:255)).toString(16).slice(1)}`;}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{Drupal.behaviors.ginEscapeAdmin={attach:(context)=>{once("ginEscapeAdmin","[data-gin-toolbar-escape-admin]",context).forEach(((el)=>{const escapeAdminPath=sessionStorage.getItem("escapeAdminPath");drupalSettings.path.currentPathIsAdmin&&null!==escapeAdminPath&&el.setAttribute("href",escapeAdminPath);}));}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{const toolbarVariant=drupalSettings.gin.toolbar_variant;Drupal.behaviors.ginToolbar={attach:(context)=>{Drupal.ginToolbar.init(context),Drupal.ginToolbar.initKeyboardShortcut(context);}},Drupal.ginToolbar={init:function(context){once("ginToolbarInit","#gin-toolbar-bar",context).forEach((()=>{const toolbarTrigger=document.querySelector(".toolbar-menu__trigger");"classic"!=toolbarVariant&&localStorage.getItem("Drupal.toolbar.trayVerticalLocked")&&localStorage.removeItem("Drupal.toolbar.trayVerticalLocked"),"true"===localStorage.getItem("Drupal.gin.toolbarExpanded")?(document.body.setAttribute("data-toolbar-menu","open"),toolbarTrigger.classList.add("is-active")):(document.body.setAttribute("data-toolbar-menu",""),toolbarTrigger.classList.remove("is-active")),this.initDisplace();})),once("ginToolbarToggle",".toolbar-menu__trigger",context).forEach(((el)=>el.addEventListener("click",((e)=>{e.preventDefault(),this.toggleToolbar();}))));},initKeyboardShortcut:function(context){once("ginToolbarKeyboardShortcutInit",".toolbar-menu__trigger, .admin-toolbar__expand-button",context).forEach((()=>{document.addEventListener("keydown",((e)=>{!0===e.altKey&&"KeyT"===e.code&&this.toggleToolbar();}));}));},initDisplace:()=>{const toolbar=document.querySelector("#gin-toolbar-bar .toolbar-menu-administration");toolbar&&("vertical"===toolbarVariant?toolbar.setAttribute("data-offset-left",""):toolbar.setAttribute("data-offset-top",""));},toggleToolbar:function(){const toolbarTrigger=document.querySelector(".toolbar-menu__trigger");toolbarTrigger.classList.toggle("is-active"),toolbarTrigger.classList.contains("is-active")?this.showToolbar():this.collapseToolbar();},showToolbar:function(){document.body.setAttribute("data-toolbar-menu","open"),localStorage.setItem("Drupal.gin.toolbarExpanded","true"),this.dispatchToolbarEvent("true"),this.displaceToolbar(),window.innerWidth<1280&&"vertical"===toolbarVariant&&Drupal.ginSidebar.collapseSidebar();},collapseToolbar:function(){const toolbarTrigger=document.querySelector(".toolbar-menu__trigger"),elementToRemove=document.querySelector(".gin-toolbar-inline-styles");toolbarTrigger.classList.remove("is-active"),document.body.setAttribute("data-toolbar-menu",""),elementToRemove&&elementToRemove.parentNode.removeChild(elementToRemove),localStorage.setItem("Drupal.gin.toolbarExpanded","false"),this.dispatchToolbarEvent("false"),this.displaceToolbar();},dispatchToolbarEvent:(active)=>{const event=new CustomEvent("toolbar-toggle",{detail:"true"===active});document.dispatchEvent(event);},displaceToolbar:()=>{ontransitionend=()=>{Drupal.displace(!0);};}};})(Drupal,drupalSettings,once);;
(function(Drupal,$,once,drupalSettings,cookies){'use strict';if(typeof NodeList!=='undefined'&&NodeList.prototype&&!NodeList.prototype.forEach)NodeList.prototype.forEach=Array.prototype.forEach;function convertRelativeToAbsolute(baseUrl,relativeUrl){const anchor=document.createElement('a');anchor.href=relativeUrl;if(anchor.protocol&&anchor.hostname)return relativeUrl;return new URL(relativeUrl,baseUrl).href;}function updateImageUrlsToAbsolute(dom=document,win=window){const images=dom.querySelectorAll('img');images.forEach(function(img){img.src=convertRelativeToAbsolute(win.location.href,img.src);});}const getDom=async function(url,nonce){const iframeContainer=document.createElement('div');iframeContainer.setAttribute('id','div_iframe');document.body.appendChild(iframeContainer);const separator=url.includes('?')?'&':'?';iframeContainer.innerHTML=`<iframe id='domIframe' src=${url}${separator}si_preview_nonce=${nonce} style='height:100vh; width:100%'></iframe>`;const iframe=document.getElementById('domIframe');const promise=new Promise(function(resolve,reject){iframe.addEventListener('load',()=>{iframe.contentWindow.document.querySelectorAll('#toolbar-administration').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('#toolbar-administration-secondary').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('#admin-toolbar').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('iframe').forEach(function(item){item.innerHTML='';item.src='';});iframe.contentWindow.document.querySelectorAll('.contextual').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('.contextual-links').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('.block-local-tasks-block').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('.node-preview-container').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('.si-toggle-container').forEach(function(item){item.innerHTML='';});iframe.contentWindow.document.querySelectorAll('.si-iframe-container').forEach(function(item){item.innerHTML='';});updateImageUrlsToAbsolute(iframe.contentWindow.document,iframe.contentWindow);const cleanDom=iframe.contentWindow.document;document.body.removeChild(iframeContainer);resolve(cleanDom);},{once:true});});const documentReturned=await promise;$('.si-overlay').remove();return documentReturned;};var siteimprove={input:function(){this.url=drupalSettings.siteimprove.input.url;this.method='input';this.common();},domain:function(){this.url=drupalSettings.siteimprove.domain.url;this.method='domain';this.common();},clear:function(){this.method='clear';var _si=window._si||[];_si.push([this.method,function(){},drupalSettings.siteimprove.token]);},recheck:function(){this.url=drupalSettings.siteimprove.recheck.url;this.method='recheck';this.common();},recrawl:function(){this.url=drupalSettings.siteimprove.recrawl.url;this.method='recrawl';this.common();},contentcheck:function(){this.urls=drupalSettings.siteimprove.input&&drupalSettings.siteimprove.input.url?drupalSettings.siteimprove.input.url:drupalSettings.siteimprove.domain.url;if(!Array.isArray(this.urls))this.urls=[this.urls];this.method='contentcheck-flat-dom';var _si=window._si||[];var self=this;this.urls.forEach(function(url){let document_=document.cloneNode(true);_si.push([self.method,self.cleanHtml(document_),url,drupalSettings.siteimprove.token,function(){console.log('Pre-publish check ordered (flat dom version)');}]);});},registerPrepublishCallback:function(){this.urls=drupalSettings.siteimprove.input&&drupalSettings.siteimprove.input.url?drupalSettings.siteimprove.input.url:drupalSettings.siteimprove.domain.url;this.urls=window.location.href;if(!Array.isArray(this.urls))this.urls=[this.urls];this.method='registerPrepublishCallback';var _si=window._si||[];var self=this;this.urls.forEach(function(url){const getDomCallback=function(){return getDom(url);};_si.push([self.method,getDomCallback]);});},onhighlight:function(){let event;event=new CustomEvent('siteimproveContentcheckHighlight');this.method='onHighlight';var _si=window._si||[];_si.push([this.method,function(highlightInfo){_si.push(['applyDefaultHighlighting',highlightInfo,document,window]);event.highlightSelector=highlightSelector;document.dispatchEvent(event);}]);},common:function(){this.urls=this.url;if(!Array.isArray(this.urls))this.urls=[this.urls];var _si=window._si||[];var self=this;this.urls.forEach(function(url){_si.push([self.method,url,drupalSettings.siteimprove.token]);self.onhighlight();self.registerPrepublishCallback();});},cleanHtml:function(origHtml){if(origHtml.querySelector('#toolbar-administration'))origHtml.querySelector('#toolbar-administration').innerHTML='';if(origHtml.querySelector('#toolbar-administration-secondary'))origHtml.querySelector('#toolbar-administration-secondary').innerHTML='';if(origHtml.querySelector('#admin-toolbar'))origHtml.querySelector('#admin-toolbar').innerHTML='';origHtml.querySelectorAll('iframe').forEach(function(item){item.innerHTML='';item.src='';});origHtml.querySelectorAll('.contextual').forEach(function(item){item.innerHTML='';});origHtml.querySelectorAll('.contextual-links').forEach(function(item){item.innerHTML='';});origHtml.querySelectorAll('.node-preview-container').forEach(function(item){item.innerHTML='';});origHtml.querySelectorAll('.block-local-tasks-block').forEach(function(item){item.innerHTML='';});return origHtml;},events:{recheck:function(){$('.siteimprove-recheck-button').click(function(){siteimprove.recheck();return false;});},contentcheck:function(){$('.siteimprove-contentcheck-button').click(function(){siteimprove.contentcheck();siteimprove.onhighlight();return false;});}}};Drupal.behaviors.siteimprove={attach:function(context,settings){$(once('siteimprove','body',context)).each(function(){if(typeof settings.siteimprove.recheck!=='undefined'){if(settings.siteimprove.recheck.auto)siteimprove.recheck();siteimprove.events.recheck();}if(typeof settings.siteimprove.contentcheck!=='undefined')setTimeout(function(){if(settings.siteimprove.contentcheck.auto){siteimprove.contentcheck();siteimprove.onhighlight();}siteimprove.events.contentcheck();},200);let $buttons=$('.contextual-region .siteimprove-contentcheck-button, .contextual-region .siteimprove-recheck-button');$buttons.removeClass('is-active');$buttons.parent().removeClass('is-active');$('.siteimprove-contentcheck-button').click(function(event){event.preventDefault();siteimprove.contentcheck();siteimprove.onhighlight();return false;});if(typeof settings.siteimprove.onhighlight!=='undefined')if(settings.siteimprove.onhighlight.auto)siteimprove.onhighlight();if(typeof settings.siteimprove.input!=='undefined')if(settings.siteimprove.input.auto)siteimprove.input();if(typeof settings.siteimprove.domain!=='undefined')if(settings.siteimprove.domain.auto)siteimprove.domain();if(typeof settings.siteimprove.clear!=='undefined')if(settings.siteimprove.clear.auto)siteimprove.clear();if(typeof settings.siteimprove.recrawl!=='undefined')if(settings.siteimprove.recrawl.auto)siteimprove.recrawl();});var OVERLAY_COLLAPSED='6';var OVERLAY_OPEN='48';var sicmsplugin=cookies.get('sicmsplugin');if(!sicmsplugin){let siOverlaySettings=null;let secure=false;if(drupalSettings&&drupalSettings.siteimprove){if('overlay_default_collapse' in drupalSettings.siteimprove)siOverlaySettings=drupalSettings.siteimprove.overlay_default_collapse;if('overlay_cookie_secure' in drupalSettings.siteimprove)secure=drupalSettings.siteimprove.overlay_cookie_secure;}if(siOverlaySettings)cookies.set('sicmsplugin',OVERLAY_COLLAPSED,{domain:document.domain,path:'/',secure});else cookies.set('sicmsplugin',OVERLAY_OPEN,{domain:document.domain,path:'/',secure});}}};})(Drupal,jQuery,once,drupalSettings,window.Cookies);;
